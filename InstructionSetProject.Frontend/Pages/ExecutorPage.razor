@page "/executor"
@using InstructionSetProject.Backend;
@using InstructionSetProject.Backend.StaticFrontend;
@using InstructionSetProject.Backend.StaticPipeline;
@using Syncfusion.Blazor.Diagram
@using System.Collections.ObjectModel
@using System.ComponentModel
@using InstructionSetProject.Backend.InstructionTypes
@using DiagramShapes = Syncfusion.Blazor.Diagram.Shapes
@using DiagramSegments = Syncfusion.Blazor.Diagram.ConnectorSegmentType
@inject NavigationManager UriHelper
@inject IJSRuntime JSRuntime

<style>
    #inputFile {
        transform: translateY(10px);
        font-size: 14px;
        margin-left: 5px;
        width: 93px;
        border: 1px solid black;
        font-family: revert !important;
    }

    SfSplitter {
        border: none;
    }

    #innerSplitter {
        border: none;
    }

    #mainSplitter {
        border: none;
    }

    .codeDiv {
        padding-right: 5px;
    }

    .registerPane {
        padding: 0px 5px 0px 5px;
        margin-bottom: 50px;
    }

    .ioPane {
        padding: 5px 5px 0px 5px;
    }

    .e-splitter .e-split-bar.e-split-bar-horizontal.e-split-bar-hover,
    .e-splitter .e-split-bar.e-split-bar-horizontal.e-split-bar-active {
        background: blue;
    }

    .e-splitter .e-split-bar.e-split-bar-horizontal{
        background: #20639B;
    }

    .special {
        color:#D6665D;
    }

    .dark-mode-executor-code-input {
        background-color: #002833 !important;
        color: #DEB992;
        font-family: 'Courier New', sans-serif;
    }

    .dark-mode-executor-textarea {
        background-color: black !important;
        color: #adadad !important;
    }

    .dark-mode-executor-btn {
        background-color: #051622;
        color: #adadad;
        border: 2px solid #003033;
    }

    .dark-mode-executor-btn:hover {
        background-color: #004a52;
        color: #adadad;
        border: 2px solid #003033;
    }

    .dark-mode-executor-register-label {
        color: #adadad !important;
    }

    .dark-mode-executor-register-pane {
        color: #adadad !important;
        background-color: black !important;
    }

    .e-sizing .e-tbar-btn-text {
        font-size: 22px;
    }

    .modalDivEx {
        position: absolute;
        top: 10%;
        transform: translate(160px, -50%);
    }

    .modalDivEx1 {
        position: absolute;
        top: 25%;
        transform: translate(10px, -50%);
    }

    .modalExBtn {
        position: absolute;
        top: 90%;
        transform: translate(180px, -50%);
        background-color: #20639B;
        color: white;
    }

    .modalDivEx2 {
        position: absolute;
        top: 70%;
        transform: translate(85px, -50%);
    }

    ::-webkit-scrollbar {
        display: none;
    }

    .monacoEditorCSS {
        margin-top: 10px;
        width: 100%;
        height: 500px;
        border: 2px solid gray;
    }

    .registerTextArea {
        @(memoryDumpSwitch ? "max-width: 180px" : "max-width: 80px");
        height: 35px;
        overflow-x: hidden;
        overflow-y: hidden;
        text-align: center;
        font-size: 18px;
        color: black;
        transform: translateY(10px);
    }

    .e-grid.e-default .e-grouptopleftcell {
        @(FrontendVariables.darkMode ? "border-color: #212121" : "border-color: white");
    }

    .e-grid .e-groupdroparea.e-grouped {
        @(FrontendVariables.darkMode ? "background-color: #212121" : "");
    }

    .e-grid .e-groupdroparea.e-grouped {
        padding: 9px 0 10px;
    }

    .e-grid .e-groupheadercell {
        @(FrontendVariables.darkMode ? "background-color: #424242; border-color: #616161; border-radius: 12px; color: #fff;" : "background-color: white; border-color: darkgray; border-radius: 12px; color: black;");
    }

    .e-grid .e-gridheader {
        @(FrontendVariables.darkMode ? "background-color: #303030; border-bottom-color: #616161; border-top-color: #616161; color: rgba(255, 255, 255, 0.7);" : "background-color: white; border-bottom-color: darkgray; border-top-color: darkgray; color: black;");
    }

    .e-grid .e-headercell, .e-grid .e-detailheadercell {
        @(FrontendVariables.darkMode ? "background-color: #303030; border-color: #616161;" : "");
    }

    .e-grid .e-grouptopleftcell {
        @(FrontendVariables.darkMode ? "background-color: #303030; border-color: #616161;" : "");
    }

    .e-grid .e-content {
        @(FrontendVariables.darkMode ? "background-color: #303030;" : "");
    }

    .e-grid .e-table {
        @(FrontendVariables.darkMode ? "background-color: #303030;" : "");
    }

    .e-grid .e-groupcaption, .e-grid .e-indentcell, .e-grid .e-recordplusexpand, .e-grid .e-recordpluscollapse {
        @(FrontendVariables.darkMode ? "background-color: #424242; color: #fff;" : "");
    }

    .e-grid .e-rowcell:not(.e-editedbatchcell):not(.e-updatedtd), .e-grid .e-detailrowcollapse:not(.e-editedbatchcell):not(.e-updatedtd), .e-grid .e-detailrowexpand:not(.e-editedbatchcell):not(.e-updatedtd), .e-grid .e-gridcontent .e-rowdragdrop:not(.e-editedbatchcell):not(.e-updatedtd), .e-grid .e-gridheader .e-rowdragdrop:not(.e-editedbatchcell):not(.e-updatedtd), .e-grid .e-emptyrow:not(.e-editedbatchcell):not(.e-updatedtd) {
        @(FrontendVariables.darkMode ? "color: rgba(255, 255, 255, 0.87);" : "");
    }

    .e-grid .e-rowcell, .e-grid .e-groupcaption, .e-grid .e-indentcell, .e-grid .e-recordplusexpand, .e-grid .e-recordpluscollapse, .e-grid .e-rowdragdropcell, .e-grid .e-detailrowcollapse, .e-grid .e-detailrowexpand, .e-grid .e-detailindentcell, .e-grid .e-detailcell {
        @(FrontendVariables.darkMode ? "border-color: #616161;" : "");
    }

    .e-grid .e-rowcell {
        @(FrontendVariables.darkMode ? "color: white !important;" : "color: black !important;");
    }

    .e-grid .e-groupdroparea {
        @(FrontendVariables.darkMode ? "background-color: #212121; border-top-color: #616161; color: rgba(255, 255, 255, 0.7);" : "");
    }

    .e-dlg-header, .e-dlg-header * {
        @(FrontendVariables.darkMode ? "color: rgba(255, 255, 255, 0.87);" : " color: black;");
    }

    .e-dlg-header select {
        @(FrontendVariables.darkMode ? 
        "color: rgba(255, 255, 255, 0.87); background-color: #424242; font-size: 16px; font-weight: 500;" 
        : 
        "color: black; background-color: white; font-size: 16px; font-weight: 500;");
    }

    .e-dialog {
        @(FrontendVariables.darkMode ? "background-color: black" : "background-color: white");
    }

    .e-diagram {
        @(FrontendVariables.darkMode ? "background-color: gray" : "background-color: white");
    }
</style>

<Modal @bind-Open="IsModalOpened" Close="OnClose">
    <form class="modalForm" method="dialog" style="width: 400px; height: 600px; align-content: flex-start">
        <div class="modalDivEx">
            <span style="font-size: 24px">Settings</span>
        </div>
        <div class="modalDivEx1">
            <label class="staticLabel" style="transform: translateY(-35px); font-family: monospace">@(StaticMode == true ? "Static" : "Dynamic") -> </label>
            <label class="switch">
                <input type="checkbox" class="inputCheckbox" @onchange="toggleStaticDynamicMode">
                <span class="slider round"  style="transform: translateY(-18px)"></span>
            </label>
        </div>
        <!-- Add a stage legend right here in this spot where this comment is located-->
        @if(StaticMode == true)
        {
            <div class="modalDivEx2">
                <p class="bg-fetch" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Fetch</b></p>
                <p class="bg-decode" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Decode</b></p>
                <p class="bg-execute" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Execute</b></p>
                <p class="bg-memory" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Memory</b></p>
                <p class="bg-write" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>WriteBack</b></p>
            </div>
        }
        else if(StaticMode == false)
        {
            <div class="modalDivEx2">
                <p class="bg-fetch" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Issue</b></p>
                <p class="bg-decode" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Execute</b></p>
                <p class="bg-execute" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Read</b></p>
                <p class="bg-memory" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Write</b></p>
                <p class="bg-write" style="color: white; font-family: monospace; font-size: 20px; width: 200px; transform: translateX(15px); text-align: center"><b>Commit</b></p>
            </div>
        }

        <div class="modalDivEx1">
            <label class="staticLabel" style="font-family: monospace">MemDump Toggle -> </label>
            <label class="switch">
                <input type="checkbox" class="inputCheckbox" @onchange="toggleMemoryDump">
                <span class="slider round"  style="transform: translateY(23px)"></span>
            </label>
        </div>

        <div style="width: 100%; transform: translateY(220px)">
            <label style="width: 80%; margin-left: 12%">Clock Delay: @sliderValue ms</label>
             <div style="width: 80%; margin-left: 10%">
                 <SfSlider @bind-Value="@sliderValue" Step="500" Min="0" Max="5000">
                    <SliderTicks Placement="Placement.After" ShowSmallTicks="true" LargeStep="1000" SmallStep="500"></SliderTicks>
                    <SliderTooltip IsVisible="true" ShowOn="TooltipShowOn.Always" Placement="TooltipPlacement.Before"></SliderTooltip>
                </SfSlider>
            </div>
        </div>

         <button class="modalExBtn" value="cancel">Close</button>
    </form>
</Modal>

<div class="code_input_executor">
    <div class="code_input_wrapper">
        <div>
            <SfToolbar Height="65px">
                <ToolbarItems>
                    <ToolbarItem PrefixIcon="e-icons e-settings" Text="Build" OnClick="buildCodeAsync" TooltipText="Build the source/machine code prior to running"></ToolbarItem>
                    <ToolbarItem PrefixIcon="e-icons e-chevron-right-fill" Text="Run" Type="ItemType.Button" OnClick="runCodeAsync" TooltipText="Run the code"></ToolbarItem>
                    <ToolbarItem PrefixIcon="e-icons e-properties-1" Text="Debug" TooltipText="Start debugging the code" OnClick="Debug"></ToolbarItem>
                    <ToolbarItem Type="ItemType.Separator"></ToolbarItem>
                    <ToolbarItem PrefixIcon="e-icons e-clock" Text="Clock Tick" OnClick="ClockPress" TooltipText="Perform on clock tick" Disabled="@(StaticMode ? (SPEx == null || SPEx.IsExecutionFinished()) : (DPEx == null || DPEx.IsExecutionFinished()))"></ToolbarItem>
                    <ToolbarItem PrefixIcon="e-icons e-text-wrap" Text="Step" OnClick="step" TooltipText="Step through each line of code upon debugging" Disabled="@(StaticMode ? (SPEx == null || SPEx.IsExecutionFinished()) : (DPEx == null || DPEx.IsExecutionFinished()))"></ToolbarItem>
                    <ToolbarItem PrefixIcon="e-icons e-check" Text="Continue" OnClick="Continue" TooltipText="Continue through the rest of the program" Disabled="@(StaticMode ? (SPEx == null || SPEx.IsExecutionFinished()) : (DPEx == null || DPEx.IsExecutionFinished()))"></ToolbarItem>
                    <ToolbarItem PrefixIcon="e-icons e-bullet-3" Text="Stop" OnClick="Stop" TooltipText="Stop the program" Disabled="@(StaticMode ? (SPEx == null || SPEx.IsExecutionFinished()) : (DPEx == null || DPEx.IsExecutionFinished()))"></ToolbarItem>
                    <ToolbarItem Type="ItemType.Separator"></ToolbarItem>
                    <ToolbarItem Text="DataPath" TooltipText="Show the data path of instructions" Disabled="@ShowButton" OnClick="OnClicked"></ToolbarItem>
                    <ToolbarItem Type="ItemType.Separator"></ToolbarItem>
                    <ToolbarItem Text="Cache" TooltipText="Show the cache" Disabled="@ShowButton" OnClick="OnClickedCache"></ToolbarItem>
                    <ToolbarItem Type="ItemType.Separator"></ToolbarItem>
                    <ToolbarItem Text="Settings" TooltipText="Executor Settings" OnClick="e => IsModalOpened = true" Align="ItemAlign.Right" CssClass="e-sizing" Disabled="@(StaticMode ? (SPEx != null && !SPEx.IsExecutionFinished()) : (DPEx != null && !DPEx.IsExecutionFinished()))"></ToolbarItem>
                </ToolbarItems> 
            </SfToolbar>
            

            <SfDialog Target="#target" Width="1225px" Height="850px" ResizeHandles="@dialogResizeDirections" AllowDragging="true" EnableResize="true" ShowCloseIcon="true" @bind-Visible="StaticVisibility">
                <DialogTemplates>
                    <Header>Static Datapath: 
                        <Syncfusion.Blazor.Buttons.SfButton OnClick="step" Content="Step" Disabled="@(StaticMode ? (SPEx == null || SPEx.IsExecutionFinished()) : (DPEx == null || DPEx.IsExecutionFinished()))" IsPrimary="true" style="transform: translateY(5px)"></Syncfusion.Blazor.Buttons.SfButton>
                        <Syncfusion.Blazor.Buttons.SfButton OnClick="ClockTick" Content="Clock Tick" Disabled="@(StaticMode ? (SPEx == null || SPEx.IsExecutionFinished()) : (DPEx == null || DPEx.IsExecutionFinished()))" IsPrimary="true" style="transform: translateY(5px)"></Syncfusion.Blazor.Buttons.SfButton>
                    </Header>
                    <Content>
                        <SfDiagramComponent Height="680px" Constraints="DiagramConstraints.None" Nodes="@NodeCollection" Connectors="@ConnectorCollection" @ref="@diagram">
                            <SnapSettings Constraints=SnapConstraints.None>
                            </SnapSettings>
                        </SfDiagramComponent>
                        <textarea style="height: 35px; width: 265px; margin-left: 35px; text-align: center; @(FrontendVariables.darkMode ? "background-color: darkgray; color: white" : "background-color: white; color: black")" readonly>@fetchMnemonic</textarea>
                        <textarea style="height: 35px; width: 257px; text-align: center; @(FrontendVariables.darkMode ? "background-color: darkgray; color: white" : "background-color: white; color: black")" readonly>@decodeMnemonic</textarea>
                        <textarea style="height: 35px; width: 237px; text-align: center; @(FrontendVariables.darkMode ? "background-color: darkgray; color: white" : "background-color: white; color: black")" readonly>@executeMnemonic</textarea>
                        <textarea style="height: 35px; width: 252px; text-align: center; @(FrontendVariables.darkMode ? "background-color: darkgray; color: white" : "background-color: white; color: black")" readonly>@memoryMnemonic</textarea>
                        <textarea style="height: 35px; width: 118px; text-align: center; @(FrontendVariables.darkMode ? "background-color: darkgray; color: white" : "background-color: white; color: black")" readonly>@writeMnemonic</textarea>
                    </Content>
                </DialogTemplates>
                <DialogEvents Opened="@DialogOpen" Closed="@DialogClose"></DialogEvents>
            </SfDialog>

            <SfDialog Target="#target" Width="1225px" Height="850px" ResizeHandles="@dialogResizeDirections" AllowDragging="true" EnableResize="true" ShowCloseIcon="true" @bind-Visible="DynamicVisibility">
                <DialogTemplates>
                    <Header>Dynamic Datapath: 
                        <Syncfusion.Blazor.Buttons.SfButton OnClick="step" Content="Step" Disabled="@(StaticMode ? SPEx == null : DPEx == null)" IsPrimary="true" style="transform: translateY(5px)"></Syncfusion.Blazor.Buttons.SfButton>
                        <Syncfusion.Blazor.Buttons.SfButton OnClick="ClockTick" Content="Clock Tick" Disabled="@(StaticMode ? SPEx == null : DPEx == null)" IsPrimary="true" style="transform: translateY(5px)"></Syncfusion.Blazor.Buttons.SfButton>
                    </Header>
                    <Content>
                        <SfDiagramComponent Height="720px" Constraints="DiagramConstraints.None" Nodes="@NodeCollection" Connectors="@ConnectorCollection" @ref="@diagram">
                            <SnapSettings Constraints=SnapConstraints.None>
                            </SnapSettings>
                        </SfDiagramComponent>
                    </Content>
                </DialogTemplates>
                <DialogEvents Opened="@DialogOpen" Closed="@DialogClose"></DialogEvents>
            </SfDialog>

            <SfDialog Target="#target" Width="350px" Height="140px" AllowDragging="false" EnableResize="false" ShowCloseIcon="true" @bind-Visible="errorVis">
                <DialogTemplates>
                    <Header>EMPTY SOURCE CODE ERROR</Header>
                    <Content>Your source code cannot build if there is no code there to build! Add some code first then try again.</Content>
                </DialogTemplates>
                <DialogEvents Closed="@errorClose"></DialogEvents>
            </SfDialog>

            <SfDialog Target="#target" Width="580px" Height="700px" AllowDragging="true" EnableResize="false" ShowCloseIcon="true" @bind-Visible="ShowCache">
                <DialogTemplates>
                    <Header><span style="font-size: 28px">Cache</span><br />
                        <label for="cacheChoice">Choose cache level to display:</label><br />
                        <select @bind="SelectedCache" id="cacheChoice">
                            <option value="L1" selected>L1</option>
                            <option value="L2">L2</option>
                        </select><br>
                        
                    </Header>
                    <Content>
                        @if(SelectedCache.Equals("L1"))
                        {
                            <Syncfusion.Blazor.Buttons.SfButton Content="Expand/Collapse All" OnClick="expandL1Cache" style="width: 30%; margin-left: 35%; margin-top: 5px"></Syncfusion.Blazor.Buttons.SfButton>
                            <SfGrid @ref="L1CacheGridObject" DataSource="@L1CacheSource" AllowGrouping="true" >
                                <GridGroupSettings Columns="@GroupedColumns" ></GridGroupSettings>
                                <GridColumns>
                                    <GridColumn Field=@nameof(CacheLineData.Index) IsPrimaryKey="true" HeaderText="Index" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Left" Width="50"></GridColumn>
                                    <GridColumn Field=@nameof(CacheLineData.Tag) HeaderText="Tag" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Right" Width="100"></GridColumn>
                                    <GridColumn Field=@nameof(CacheLineData.Data) HeaderText="Data" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Right" Width="120"></GridColumn>
                                </GridColumns>
                            </SfGrid>
                        }
                        else
                        {
                            <Syncfusion.Blazor.Buttons.SfButton Content="Expand/Collapse All" OnClick="expandL2Cache" style="width: 30%; margin-left: 35%; margin-top: 5px"></Syncfusion.Blazor.Buttons.SfButton>
                            <SfGrid @ref="L2CacheGridObject" DataSource="@L2CacheSource" AllowGrouping="true">
                                <GridGroupSettings Columns="@GroupedColumns"></GridGroupSettings>
                                <GridColumns>
                                    <GridColumn Field=@nameof(CacheLineData.Index) IsPrimaryKey="true" HeaderText="Index" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Left" Width="50"></GridColumn>
                                    <GridColumn Field=@nameof(CacheLineData.Tag) HeaderText="Tag" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Right" Width="100"></GridColumn>
                                    <GridColumn Field=@nameof(CacheLineData.Data) HeaderText="Data" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Right" Width="120"></GridColumn>
                                </GridColumns>
                            </SfGrid>
                        }

                    </Content>
                </DialogTemplates>
                <DialogEvents Closed="@errorClose"></DialogEvents>
            </SfDialog>
        </div>
        <div class="row">
            <div class="col-4" style=@(memoryDumpSwitch ? "width: 50% !important" : "width: 35% !important")>
                <div class="codeDiv">
                    <div class="tab">
                        <button class="tablinks" onclick="swapTab(event, 'Executor')" id="defaultOpen">Executor</button>
                        <button class="tablinks" onclick="swapTab(event, 'Debugger')" id="debuggerTab">Debugger</button>
                        <button class="tablinks" onclick="swapTab(event, 'Stats')">Statistics</button>
                    </div>

                    <div id="Executor" class="tabcontent">
                        <div class="executorTabContent">
                            <div>
                                <InputFile OnChange="@LoadFile" id="inputFile" class="float-start" accept=".txt"></InputFile>
                                <label id="exLabel"><b>Source Code</b></label>
                                <button @onclick="SaveAssemblyCode" type="button" class="float-end" id="saveButton">Save File</button>
                            </div>

                            <!--Monaco Editor currently in the works-->
                            <MonacoEditor @ref="_editor" Id="MonacoEditorID" ConstructionOptions="EditorConstructionOptions" CssClass="monacoEditorCSS" OnDidInit="EditorOnDidInit"/>

                            <!-- Remove this next line of code to use the original text editor-->
                            <!--<textarea @bind="ExecAssemblyCode" id="assemblyTextBox" class="assemblyCodeBoxToUpdate" placeholder="Write your assembly code here..."></textarea><br />-->
                            <div>
                                <label id="exLabel"><b>Machine Code</b></label>
                            </div>
                            <textarea @bind="ExecMachineCode" id="machineTextBox" readonly placeholder="Machine code output will appear here after building code..."></textarea>
                        </div>
                    </div>

                    <div id="Debugger" class="tabcontent">
                        <div class="debuggerTabContent">
                            <div class="debugLabel">
                                <label id="exLabel"><b>Stack Trace</b></label>
                            </div>
                            <div class="debugContainer" id="debugCodeId">
                                @if (StaticMode ? SPEx != null : DPEx != null)
                                {
                                    @foreach (var instr in (StaticMode ? SPEx.InstrList : DPEx.instrQueue.instructions).InstructionOffsetDictionary)
                                    {
                                        <p class="@DivCSS(instr.Value)"><a class="@DivCSS(instr.Value)" title="Jump To @instr.Key.ToString("X4")" style="color: blue; text-decoration: underline; cursor: pointer" @onclick="() => selectMemDumpText(instr.Key)">@instr.Key.ToString("X4")</a>:     @instr.Value.Disassemble()</p>
                                    }
                                }
                                <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
                            </div>
                        </div>
                    </div>

                    <div id="Stats" class="tabcontent">
                        <div class="statsTabContent">
                            <div>
                                <label id="exLabel" class="statsClass"><b>Statistics</b></label>
                                <button @onclick="SaveStats" type="button" class="float-end" id="saveButton">Save Stats</button>
                            </div>
                            <textarea @bind="statsString" id="statsTabTextarea" placeholder="Statistics will appear after running the code..." readonly></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-5" style=@(memoryDumpSwitch ? "width: 50% !important" : "width: 25% !important")>
                <div>
                    <div class="registerPane" id="RegisterPane">
                        <div>
                            <div class="row">
                                <div class="col-sm-4" style="align-items: center">
                                    <label class="registerLabel"><b>PC:</b></label>
                                    <textarea readonly class="registerTextArea">@PC</textarea><br/>

                                    <label class="registerLabel"><b>SP:</b></label>
                                    <textarea readonly class="registerTextArea">@SP</textarea><br/>

                                    <label class="registerLabel"><b>FL:</b></label>
                                    <textarea readonly class="registerTextArea">@FL</textarea><br/>
                                        
                                    <label class="registerLabel"><b>MP:</b></label>
                                    <textarea readonly class="registerTextArea">@MBP</textarea><br/>
                                </div>

                                <div class="col-sm-4">
                                    <label class="registerLabel"><b>R0:</b></label>
                                    <textarea readonly class="registerTextArea">@r0</textarea><br/>

                                    <label class="registerLabel"><b>R1:</b></label>
                                    <textarea readonly class="registerTextArea">@r1</textarea><br/>

                                    <label class="registerLabel"><b>R2:</b></label>
                                    <textarea readonly class="registerTextArea">@r2</textarea><br/>

                                    <label class="registerLabel"><b>R3:</b></label>
                                    <textarea readonly class="registerTextArea">@r3</textarea><br/>

                                    <label class="registerLabel"><b>R4:</b></label>
                                    <textarea readonly class="registerTextArea">@r4</textarea><br/>

                                    <label class="registerLabel"><b>R5:</b></label>
                                    <textarea readonly class="registerTextArea">@r5</textarea><br/>

                                    <label class="registerLabel"><b>R6:</b></label>
                                    <textarea readonly class="registerTextArea">@r6</textarea><br/>

                                    <label class="registerLabel"><b>R7:</b></label>
                                    <textarea readonly class="registerTextArea">@r7</textarea>
                                </div>
                                    
                                <div class="col-sm-4">
                                    <label class="registerLabel"><b>F0:</b></label>
                                    <textarea readonly class="registerTextArea">@f0</textarea><br/>

                                    <label class="registerLabel"><b>F1:</b></label>
                                    <textarea readonly class="registerTextArea">@f1</textarea><br/>

                                    <label class="registerLabel"><b>F2:</b></label>
                                    <textarea readonly class="registerTextArea">@f2</textarea><br/>

                                    <label class="registerLabel"><b>F3:</b></label>
                                    <textarea readonly class="registerTextArea">@f3</textarea><br/>

                                    <label class="registerLabel"><b>F4:</b></label>
                                    <textarea readonly class="registerTextArea">@f4</textarea><br/>

                                    <label class="registerLabel"><b>F5:</b></label>
                                    <textarea readonly class="registerTextArea">@f5</textarea><br/>

                                    <label class="registerLabel"><b>F6:</b></label>
                                    <textarea readonly class="registerTextArea">@f6</textarea><br/>

                                    <label class="registerLabel"><b>F7:</b></label>
                                    <textarea readonly class="registerTextArea">@f7</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ioPane">
                        <div class="ioContent">
                            <div class="inputBox">
                                <div>
                                    <label id="exLabel"><b>Input</b></label>
                                </div>
                                <textarea class="ExIOTextarea" placeholder="Input stuff here for the code to use..."></textarea><br/>
                            </div>
                            <div class="outputBox">
                                <div>
                                    <label id="exLabel"><b>Output</b></label>
                                </div>
                                <textarea class="ExIOTextarea" placeholder="Ouput will appear here after running code...">@output</textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3" style=@(memoryDumpSwitch ? "display: none !important" : "width: 40% !important")>
                <div>
                    <div class="memDump">
                        <div class="memoryDumpContent">
                            <div class="MemLabelClass">
                                <button class="byteAddressLabel float-start" @onclick="UpdateCounters"> Jump To </button>
                                <input id="MemDumpStart" class="byteAddressInput float-start" placeholder="ex. 00AB" @bind-value="@MemDumpStart">
                                <div class="memDumpLabel">
                                    <label id="exLabel"><b>Memory Dump</b></label>
                                </div>
                            </div>
                            <div class="memoryContainer" id="memDumpId">
                                @if (StaticMode ? SPEx != null : DPEx != null)
                                {
                                    @if (MemDumpStart == String.Empty || Convert.ToUInt32(MemDumpStart, 16) == 0)
                                    {
                                        @foreach (var instr in (StaticMode ? SPEx.InstrList : DPEx.instrQueue.instructions).InstructionOffsetDictionary)
                                        {
                                                @foreach (var character in MemDumpContent.Substring((int) (instr.Key * 2), (int) (instr.Value.lengthInBytes * 2)))
                                                {
                                                    @if (progCharCount % 32 == 0 && (int) instr.Key != 0)
                                                    {
                                                        @printMemoryCharList();
                                                        clearMemoryCharList();
                                                        <span style="white-space: pre-wrap;">&#10;</span>
                                                        @PrintProgCount();
                                                        IncrementProgCount();
                                                        ClearProgCharCount();
                                                    }
                                                    else if (progCharCount % 32 == 0 && (int) instr.Key == 0)
                                                    {
                                                        @PrintProgCount();
                                                        IncrementProgCount();
                                                        ClearProgCharCount();
                                                    }
                                                    <span class="@DivCSS(instr.Value)">@character</span>
                                                    addToMemoryCharList(character);
                                                    IncrementCharCount();
                                                    IncrementProgCharCount();
                                                    @if (charCount == instr.Value.lengthInBytes * 2)
                                                    {
                                                        ClearCharCount();
                                                    }
                                                    @if (charCount % 2 == 0 && charCount != 0 && charCount != (int) (instr.Value.lengthInBytes * 2))
                                                    {
                                                        <span class="@DivCSS(instr.Value)">@space</span>
                                                    }
                                                }
                                            @space
                                        }
                                        @foreach (var character in MemDumpContent.Substring((int) ((StaticMode ? SPEx.InstrList : DPEx.instrQueue.instructions).InstructionOffsetDictionary.Keys.Last() + (StaticMode ? SPEx.InstrList : DPEx.instrQueue.instructions).InstructionOffsetDictionary.Values.Last().lengthInBytes * 2) * 2))
                                        {
                                            @if (progCharCount % 32 == 0)
                                            {
                                                @printMemoryCharList();
                                                clearMemoryCharList();
                                                <span style="white-space: pre-wrap;">&#10;</span>
                                                @PrintProgCount();
                                                IncrementProgCount();
                                                ClearProgCharCount();
                                            }
                                            @character
                                            addToMemoryCharList(character);
                                            IncrementCharCount();
                                            IncrementProgCharCount();
                                            if (charCount % 2 == 0)
                                            {
                                                @space
                                            }
                                            if (charCount == MemDumpContent.Length)
                                            {
                                                ClearCharCount();
                                            }
                                        }
                                    }
                                    else
                                    {
                                        @PrintProgCount();
                                        IncrementProgCount();
                                        @foreach (var character in MemDumpContent)
                                        {
                                            @character
                                            addToMemoryCharList(character);
                                            IncrementCharCount();
                                            IncrementProgCharCount();
                                            @if (charCount % 2 == 0)
                                            {
                                                @space
                                            }
                                            @if (charCount == MemDumpContent.Length)
                                            {
                                                ClearCharCount();
                                            }
                                            @if (progCharCount % 32 == 0)
                                            {
                                                @printMemoryCharList();
                                                clearMemoryCharList();
                                                <span style="white-space: pre-wrap;">&#10;</span>
                                                @PrintProgCount();
                                                IncrementProgCount();
                                                ClearProgCharCount();
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    ClearProgCharCount();
                                    ClearCharCount();
                                    ClearProgCount();
                                    clearMemoryCharList();
                                    @PrintProgCount();
                                    IncrementProgCount();
                                    @for (int i = 0; i < 2000; i++)
                                    {
                                        @print0();
                                        addToMemoryCharList('0');
                                        IncrementCharCount();
                                        IncrementProgCharCount();
                                        @if (charCount % 2 == 0)
                                        {
                                            @space
                                        }
                                        @if (progCharCount % 32 == 0)
                                        {
                                            @printMemoryCharList();
                                            clearMemoryCharList();
                                            <span style="white-space: pre-wrap;">&#10;</span>
                                            @PrintProgCount();
                                            IncrementProgCount();
                                            ClearProgCharCount();
                                        }
                                    }
                                    ClearCharCount();
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>